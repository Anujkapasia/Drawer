(this.webpackJsonpDrawer=this.webpackJsonpDrawer||[]).push([[0],{21:function(t,e,c){},40:function(t,e,c){"use strict";c.r(e);var n=c(0),s=c(2),a=c(12),r=c.n(a),i=(c(21),c(13)),o=c(14),l=function(){function t(){var e=this;Object(i.a)(this,t),this.COLORS={RED:"#f44336",YELLOW:"#ffeb3b",BLUE:"#304ffe",GREEN:"#00897b",ORANGE:"#ff5722"},this.canvas=document.getElementById("drawing-canvas"),this.ctx=this.canvas.getContext("2d"),this.w=this.canvas.width,this.h=this.canvas.height,this.flag=!1,this.prevX=0,this.currX=0,this.prevY=0,this.currY=0,this.dot_flag=!1,this.x=this.COLORS.RED,this.y=4,this.findxy=function(t,c){"down"==t&&(e.prevX=e.currX,e.prevY=e.currY,e.currX=c.clientX-e.canvas.offsetLeft,e.currY=c.clientY-e.canvas.offsetTop,e.flag=!0,e.dot_flag=!0,e.dot_flag&&(e.ctx.beginPath(),e.ctx.fillStyle=e.x,e.ctx.fillRect(e.currX,e.currY,2,2),e.ctx.closePath(),e.dot_flag=!1)),"up"!=t&&"out"!=t||(e.flag=!1),"move"==t&&e.flag&&(e.prevX=e.currX,e.prevY=e.currY,e.currX=c.clientX-e.canvas.offsetLeft,e.currY=c.clientY-e.canvas.offsetTop,e.draw()),"touchstart"==t&&(e.prevX=e.currX,e.prevY=e.currY,e.currX=c.touches[0].clientX-e.canvas.offsetLeft,e.currY=c.touches[0].clientY-e.canvas.offsetTop,e.flag=!0,e.dot_flag=!0,e.dot_flag&&(e.ctx.beginPath(),e.ctx.fillStyle=e.x,e.ctx.fillRect(e.currX,e.currY,2,2),e.ctx.closePath(),e.dot_flag=!1)),"touchend"!=t&&"touchcancel"!=t||(e.flag=!1),"touchmove"==t&&e.flag&&(e.prevX=e.currX,e.prevY=e.currY,e.currX=c.touches[0].clientX-e.canvas.offsetLeft,e.currY=c.touches[0].clientY-e.canvas.offsetTop,e.draw())},this.canvas.addEventListener("mousemove",(function(t){return e.findxy("move",t)}),!1),this.canvas.addEventListener("mousedown",(function(t){return e.findxy("down",t)}),!1),this.canvas.addEventListener("mouseup",(function(t){return e.findxy("up",t)}),!1),this.canvas.addEventListener("mouseout",(function(t){return e.findxy("out",t)}),!1),this.canvas.addEventListener("touchmove",(function(t){return e.findxy("touchmove",t)}),!1),this.canvas.addEventListener("touchstart",(function(t){return e.findxy("touchstart",t)}),!1),this.canvas.addEventListener("touchend",(function(t){return e.findxy("touchend",t)}),!1),this.canvas.addEventListener("touchcancel",(function(t){return e.findxy("touchcancel",t)}),!1),this.reSize()}return Object(o.a)(t,[{key:"reSize",value:function(){this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.w=this.canvas.width,this.h=this.canvas.height}},{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.moveTo(this.prevX,this.prevY),this.ctx.lineTo(this.currX,this.currY),this.ctx.strokeStyle=this.x,this.ctx.lineWidth=this.y,this.ctx.stroke(),this.ctx.closePath()}},{key:"erase",value:function(){this.ctx.clearRect(0,0,this.w,this.h),this.ctx.globalCompositeOperation="source-over"}},{key:"save",value:function(){document.getElementById("canvasimg").style.border="2px solid";var t=canvas.toDataURL();document.getElementById("canvasimg").src=t,document.getElementById("canvasimg").style.display="inline"}},{key:"color",value:function(t){switch(t){case 1:this.ctx.globalCompositeOperation="source-over",this.x=this.COLORS.RED,this.y=4;break;case 2:this.ctx.globalCompositeOperation="source-over",this.x=this.COLORS.YELLOW,this.y=4;break;case 3:this.ctx.globalCompositeOperation="source-over",this.x=this.COLORS.BLUE,this.y=4;break;case 4:this.ctx.globalCompositeOperation="source-over",this.x=this.COLORS.GREEN,this.y=4;break;case 5:this.ctx.globalCompositeOperation="source-over",this.x=this.COLORS.ORANGE,this.y=4;break;case 6:this.ctx.globalCompositeOperation="destination-out";break;case 7:this.erase()}}}]),t}(),h=c(15),u=1,d=2,f=3,v=4,p=5,x=6,g=7,m=function(t){var e=Object(s.useState)(u),c=Object(h.a)(e,2),a=c[0],r=c[1],i=function(e){r(e),t.colorChangeHandler(e)};return Object(n.jsxs)("div",{className:"colors-container",children:[Object(n.jsx)("div",{onClick:function(){return i(u)},className:a===u?"color-selected":"color",id:"color-red"}),Object(n.jsx)("div",{onClick:function(){return i(d)},className:a===d?"color-selected":"color",id:"color-yellow"}),Object(n.jsx)("div",{onClick:function(){return i(f)},className:a===f?"color-selected":"color",id:"color-blue"}),Object(n.jsx)("div",{onClick:function(){return i(v)},className:a===v?"color-selected":"color",id:"color-green"}),Object(n.jsx)("div",{onClick:function(){return i(p)},className:a===p?"color-selected":"color",id:"color-orange"}),Object(n.jsx)("div",{onClick:function(){return i(x)},className:a===x?"eraser-selected":"eraser"}),Object(n.jsx)("div",{onClick:function(){return i(g)},className:"clear"})]})},b=c(22),O=function(t){var e;Object(s.useEffect)((function(){e=new l}));var c=function(t,e){for(var c=t.split(","),n=c[0].match(/:(.*?);/)[1],s=atob(c[1]),a=s.length,r=new Uint8Array(a);a;)r[a-1]=s.charCodeAt(a-1),a-=1;return new File([r],e,{type:n})};return Object(n.jsxs)("div",{className:"main-container",children:[Object(n.jsxs)("header",{className:"app-header",children:[Object(n.jsx)("h1",{children:"Drawer"}),Object(n.jsx)("h5",{children:"by Anuj Kapasia"})]}),Object(n.jsxs)("div",{className:"drawer-wrapper",children:[Object(n.jsx)(m,{colorChangeHandler:function(t){return e.color(t)}}),Object(n.jsx)("div",{className:"canvas-container",children:Object(n.jsx)("canvas",{id:"drawing-canvas"})}),Object(n.jsx)("div",{className:"app-footer",children:Object(n.jsx)("button",{onClick:function(){var t=e.canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),n=c(t,"drawnImage"),s=new FormData;s.append("photo",n,n.name);b.post("https://drawerapi.herokuapp.com/change",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){window.open(t,"_blank")})).catch((function(t){console.log(t)}))},children:"Save as PDF"})})]})]})};"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("../sw.js").then((function(t){return console.log("Success: ",t.scope)})).catch((function(t){return console.log("Faliure: ",t)}))})),r.a.render(Object(n.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7e6da8f2.chunk.js.map